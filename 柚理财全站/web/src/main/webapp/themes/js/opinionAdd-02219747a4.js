webpackJsonp([54],{0:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e){c["default"].error({title:e,okText:"\u5173\u95ed",wrapClassName:"tiperror"})}function i(e,t){c["default"].success({title:"\u63d0\u4ea4\u6210\u529f",content:e,okText:"\u786e\u5b9a",onOk:function(){t?window.location.href=t:window.location.href=window.location.href}})}var o=a(26),n=r(o),s=a(66),d=r(s),u=a(7),c=r(u),m=a(69),f=r(m),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a(24);var g=a(3),h=r(g),v=a(1),E=r(v);a(458);var w=a(25),x=a(299),b=r(x),y=f["default"].create,N=f["default"].Item,_=E["default"].createClass({displayName:"Msgform",picPath:[],handleSubmit:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){return e?void console.log("Errors in form!!!"):(console.log("Submit!!!"),console.log(a),a.attachmentPaths=t.picPath,a[t.props.tokenName]=t.props.tokenValue,void $.ajax({url:"/member/myAssistant/opinionAddSave.html",type:"POST",dataType:"json",data:a}).done(function(e){e.result?i(e.msg,e.url):l(e.msg)}).fail(function(){l("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5\uff01")}))})},getInitialState:function(){return{imgsrc:"/validimg.html"}},changeimg:function(){this.setState({imgsrc:"/validimg.html?t="+Math.random()})},handleReset:function(){this.props.form.resetFields()},render:function(){var e=this.props.form,t=e.getFieldProps,a=e.getFieldError,r=e.isFieldValidating,l=t("title",{validate:[{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}],trigger:["onBlur"]}]}),i=t("remark",{validate:[{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}],trigger:["onBlur"]}]}),o=t("imgValidCode",{validate:[{rules:[{required:!0,whitespace:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"}],trigger:["onBlur"]},{rules:[{validator:w.ValidateFn.checkValidCode.bind(this)}],trigger:["onBlur"]}]});return E["default"].createElement(f["default"],{horizontal:!0,className:"form-themes",form:this.props.form,onSubmit:this.handleSubmit},E["default"].createElement("div",{className:"row",style:{width:800}},E["default"].createElement("div",{className:"col-3 lab form-laber textR"},"\u610f\u89c1\u6807\u9898"),E["default"].createElement("div",{className:"col-9 pl20"},E["default"].createElement(N,{hasFeedback:!0},E["default"].createElement(d["default"],p({},l,{placeholder:"\u6807\u9898",maxLength:"30"}))))),E["default"].createElement("div",{className:"row",style:{width:800}},E["default"].createElement("div",{className:"col-3 lab form-laber textR"},"\u610f\u89c1\u63cf\u8ff0"),E["default"].createElement("div",{className:"col-16 pl20"},E["default"].createElement(N,{hasFeedback:!0},E["default"].createElement(d["default"],p({},i,{placeholder:"\u63cf\u8ff0",style:{width:"515px",height:"100px"},type:"textarea",maxLength:"200"}))))),E["default"].createElement("div",{className:"row",style:{width:800}},E["default"].createElement("div",{className:"col-3 lab form-laber textR"},"\u4e0a\u4f20\u56fe\u7247"),E["default"].createElement("div",{className:"col-18 pl20",style:{paddingTop:"13px",height:"150px"}},E["default"].createElement("p",null,"\u683c\u5f0f\u8981\u6c42\uff1a\u652f\u6301jpg\u3001jpeg\u3001bmp\u3001gif\u3001png\u683c\u5f0f\u56fe\u7247\uff0c\u5927\u5c0f\u4e0d\u8d85\u8fc71M,\u6700\u591a\u4e94\u5f20\u3002"),E["default"].createElement("div",{style:{padding:"20px 0 0 0",height:"97px",width:"580px",overflow:"hidden"}},E["default"].createElement(b["default"],{eq:0,data:"",imgArray:this.picPath,len:5})))),E["default"].createElement("div",{className:"row",style:{width:800}},E["default"].createElement("div",{className:"col-3 lab form-laber textR"},"\u9a8c\u8bc1\u7801"),E["default"].createElement("div",{className:"col-4 pl20"},E["default"].createElement(N,{hasFeedback:!0,help:r("validCode")?"\u6821\u9a8c\u4e2d...":(a("validCode")||[]).join(", ")},E["default"].createElement(d["default"],p({maxLength:"4"},o,{placeholder:"\u9a8c\u8bc1\u7801",size:"large",type:"text",autoComplete:"off"})))),E["default"].createElement("div",{className:"col-4 col-offset-2"},E["default"].createElement("img",{onClick:this.changeimg,src:this.state.imgsrc,className:"ant-form-text codeimg"}))),E["default"].createElement("div",{className:"row",style:{width:800}},E["default"].createElement("div",{className:"col-3 lab form-laber textR"}," "),E["default"].createElement("div",{className:"col-9 pl20"},E["default"].createElement(N,null,E["default"].createElement(n["default"],{type:"primary",className:"subBtn",htmlType:"submit"},"\u63d0\u4ea4")))))}});_=y()(_),h["default"].render(E["default"].createElement(_,{tokenName:"commitAssistantToken",tokenValue:$("input[name='commitAssistantToken']").val()}),document.getElementById("j-opinionAdd"))},25:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateFn=void 0;var r=a(29),l={regexRealName:function(e,t,a){t?r.Reg.regexRealName(t)?a():a([new Error("\u7528\u6237\u540d\u683c\u5f0f\u4e0d\u6b63\u786e")]):a()},regexChnName:function(e,t,a){t?r.Reg.regexChnName(t)?a():a([new Error("\u4ec5\u4e3a\u4e2d\u6587,\u4e14\u4e0d\u5305\u542b\u7a7a\u683c")]):a()},regexUserName:function(e,t,a){t&&r.Reg.regexUserName(t)?a([new Error("6-20\u4f4d\u5b57\u7b26\uff0c\u7531\u5b57\u6bcd\u6216\u5b57\u6bcd\u52a0\u6570\u5b57\u7ec4\u6210")]):a()},regexUserNameAjax:function(e,t,a){if(t)if(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}|[a-zA-Z]{6,20}$/.test(t)){var r=this;if(this.state.regexUserNameflag==t)return void a();$.ajax({url:"/user/checkUserName.html",type:"POST",dataType:"json",data:{userName:t}}).done(function(e){e.result?(r.state.regexUserNameflag=t,a()):a([new Error(e.msg)])}).fail(function(){a([new Error("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5")])})}else a([new Error("6-20\u4f4d\u5b57\u7b26\uff0c\u7531\u5b57\u6bcd\u6216\u5b57\u6bcd\u52a0\u6570\u5b57\u7ec4\u6210")]);else a()},regexIdCard:function(e,t,a){t?r.Reg.regexIdCard(t)?a():a([new Error("\u8eab\u4efd\u8bc1\u683c\u5f0f\u4e0d\u6b63\u786e,\u4ec5\u9650\u6570\u5b57\u548c\u5927\u5199X")]):a()},regexPW:function(e,t,a){t&&r.Reg.regexPassword(t)?a([new Error("8-16\u4f4d\u5b57\u7b26\uff0c\u5176\u4e2d\u5305\u62ec\u81f3\u5c11\u4e00\u4e2a\u5b57\u6bcd\u548c\u4e00\u4e2a\u6570\u5b57")]):a()},isMobile:function(e,t,a){t&&r.Reg.isMobile(t)?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801")]):a()},isNumber:function(e,t,a){t&&r.Reg.isNumber(t)?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u6574\u6570")]):a()},isApr:function(e,t,a){t&&r.Reg.isApr(t)?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57")]):a()},decimal:function(e,t,a){t&&r.Reg.isFigure(t)?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57")]):a()},isFigure:function(e,t,a){t&&(r.Reg.isFigure(t)||15!=t.length)?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u516515\u4f4d\u6570\u5b57")]):a()},isEmail:function(e,t,a){t&&r.Reg.isEmail(t)?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1")]):a()},isFixNumber:function(e,t,a){t&&(r.Reg.isFixNumber(t)||r.Reg.isFigure(t)||t.length>12||r.Reg.isPhone(t))?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5ea7\u673a\u53f7\u7801")]):a()},isloginName:function(e,t,a){t&&r.Reg.islogname(t)?a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801\u6216\u90ae\u7bb1")]):a()},checkMobile:function(e,t,a){if(t)if(r.Reg.isMobile(t))a([new Error("\u62b1\u6b49\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801")]);else{var l=this;if(this.state.mobileflag==t)return void a();$.ajax({url:"/user/checkMobile.html",type:"POST",dataType:"json",data:{mobile:t}}).done(function(e){e.result?(l.setState({mobileflag:t}),a()):a([new Error(e.msg)])}).fail(function(){a([new Error("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5")])})}else a()},checkValidCode:function(e,t,a){if(t){var r=this;if(this.state.ValidCodeflag==t)return void a();$.ajax({url:"/valicode.html",type:"POST",dataType:"json",data:{validCode:t}}).done(function(e){e.result?(r.setState({ValidCodeflag:t}),a()):(a([new Error(e.msg)]),$(".codeimg")[0].click())}).fail(function(){a([new Error("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5")])})}else a()}};t.ValidateFn=l},170:442,171:442,172:442,299:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function l(e){o["default"].error({title:e,okText:"\u5173\u95ed",wrapClassName:"tiperror"})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(7),o=r(i),n=a(1),s=r(n),d=a(3);r(d);a(172),a(171),a(170);var u=s["default"].createClass({displayName:"Imgupload",image_server_url:$("#header").data("url"),componentDidMount:function(){var e=this,t=this.props.len;this.uploadLimit=t-$(".filelist").eq(this.props.eq).find("li").size(),$("#file_upload"+this.props.eq).uploadify({fileObjName:"upload",buttonClass:"uploadBtn",buttonText:"",fileTypeDesc:"Image Files",fileTypeExts:"*.gif; *.jpg; *.png",fileSizeLimit:"1024",uploadLimit:e.uploadLimit,width:72,height:72,swf:"/themes/plugins/uploadify/uploadify.swf",uploader:e.image_server_url+"/upload/uploadifySave.html?nid=userinfo",onSelectError:function(e,a,r){var i;return a==-110?i="\u4e0a\u4f20\u7684\u5355\u5f20\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc71M\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20":a==-100?i="\u4e0a\u4f20\u7684\u56fe\u7247\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7"+t+"\u5f20":a==-130&&(i="\u9009\u62e9\u7684\u6587\u4ef6\u7c7b\u578b\u8ddf\u8bbe\u7f6e\u7684\u4e0d\u5339\u914d"),l(i),!1},overrideEvents:["onDialogClose","onUploadSuccess","onUploadError","onSelectError","onSelectOnce"],onUploadSuccess:function(t,a,r){null!=a&&("error"==a?l("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25,\u652f\u6301jpg\u3001jpeg\u3001bmp\u3001gif\u3001png\u683c\u5f0f\u56fe\u7247\uff0c\u5927\u5c0f\u4e0d\u8d85\u8fc71M"):($(".filelist").eq(e.props.eq).append("<li data-url='"+a+"'><a href='"+e.image_server_url+a+"' class='fileshow'><img src='"+e.image_server_url+a+"' width='110px' height='110px' /></a><span class='operation'><i data-imggroup data-fancybox-group='group"+e.props.eq+"' href='"+e.image_server_url+a+"' class='iconfont showimg' >&#xe67f;</i><i class='iconfont delImg' title='\u70b9\u51fb\u5220\u9664\u56fe\u7247'>&#xe67e;</i><span></li>"),e.updateArray(a),e.uploadControl()))}}),$(".imgupload").eq(this.props.eq).on("click",".filelist li .delImg",function(t){e.deletePic($(this).parents("li").data("url"),$(this).parents("li"))}),$(".filelist").eq(e.props.eq).find("[data-imggroup]").fancybox()},deletePic:function(e,t){var a=this;$.ajax({url:"/member/usercertification/deletePic.html",type:"POST",dataType:"json",data:{picPath:e}}).done(function(){t.remove(),$("#file_upload"+a.props.eq).uploadify("settings","uploadLimit",++a.uploadLimit),a.props.imgArray.remove(e),setTimeout(function(){a.uploadControl()},300)}).fail(function(){l("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u8bd5\uff01")})},updateArray:function(e){this.props.imgArray.push(e)},uploadControl:function(){var e=$(".filelist").eq(this.props.eq),t=$("#file_upload"+this.props.eq);e.find("li").length>=this.props.len?t.css("visibility","hidden"):t.css("visibility","visible")},render:function(){var e=this,t=this.props.data?this.props.data:[];return s["default"].createElement("div",{className:"imgupload"},s["default"].createElement("ul",{className:"filelist"},t.map(function(t,a){return e.props.imgArray[a]=t,s["default"].createElement("li",{key:a},s["default"].createElement("img",{src:e.image_server_url+t}),s["default"].createElement("span",{className:"operation"},s["default"].createElement("i",{"data-imggroup":!0,"data-fancybox-group":"group"+e.props.eq,href:e.image_server_url+t,className:"iconfont showimg"},"\ue67f")))})),s["default"].createElement("div",{id:"file_upload"+this.props.eq}))}});t["default"]=u,e.exports=t["default"]},458:442});