<div class="form-tips-content" id="redpackage">
<input type="hidden" id="image_server_url" value="${image_server_url}">
  <form class="form-horizontal" action="/operate/scoreshop/addGoods.html"   method="post" id="form" >
  <ul class="form-item">
  		<li class="heightLimit">
				<div class="form-group">
					<label for="isVirtual" class="control-label form-label">是否虚拟物品：</label>
					<div class="input-checkbox-box" style="height:34px;">
						<input type="radio" name="isVirtual" value="1" id="isVirtual1"><label for="">是</label>
						<input type="radio" name="isVirtual" value="0" id="isVirtual2" checked><label for="">否</label>
					</div>
				</div>
		</li>
		<li class="heightLimit"><div class="input-checkbox-box" style="height:54px;"></div></li>
  		<li class="heightLimit">
			<div class="form-group">
		      <label for="goodsCategoryId" class="control-label form-label">类别名称：</label>
		      <div class="input-box">
		      		<select name="goodsCategoryId" id="goodsCategoryId" class="form-control required"  data-msg-required="请选择">
		      		<option value="">请选择</option>
		      			<#if goodsCategory??>
		      				<#list goodsCategory as item>
		      				<option value="${item.uuid}">${item.goodsCategoryName!''}</option>
		      				</#list>
		      			</#if>
		      		</select>
		      </div>
		    </div>
  		</li>
  		<li class="heightLimit">
			<div class="form-group">
		      <label for=goodsName class="control-label form-label">商品名称：</label>
		      <div class="input-box">
		      <input type="text" class="form-control" name="goodsName"  id="goodsName" maxlength="12" placeholder="" required>
		      </div>
		    </div>
  		</li>
  		<li class="heightLimit">
			<div class="form-group">
		      <label for=supplier class="control-label form-label">供货商：</label>
		      <div class="input-box">
		      <input type="text" class="form-control" name="supplier"  id="supplier" maxlength="12" placeholder="" required>
		      </div>
		    </div>
  		</li>
  		<li class="heightLimit xn">
			<div class="form-group">
		      <label for="costPrice" class="control-label form-label">采购价格：</label>
		      <div class="input-box">
		      <input type="text" class="form-control" name="costPrice" id="costPrice" data-rule-digits="true" data-msg-digits="请输入正整数"  maxlength="12" placeholder="" required>
		      </div>
		    </div>
  		</li>
  		<li class="heightLimit xn">
			<div class="form-group">
		      <label for="marketPrice" class="control-label form-label">市场价：</label>
		      <div class="input-box">
		      <input type="text" class="form-control" name="marketPrice" id="marketPrice" data-rule-digits="true" data-msg-digits="请输入正整数"  maxlength="12" placeholder="" required>
		      </div>
		    </div>
  		</li>
  		<li class="heightLimit">
			<div class="form-group">
		      <label for="store" class="control-label form-label">商品库存：</label>
		      <div class="input-box">
		      <input type="text" class="form-control" name="store" id="store" data-rule-digits="true" data-msg-digits="请输入正整数"  maxlength="12" placeholder="" required>
		      </div>
		    </div>
  		</li>
  		
  		<!-- 红包还是加息券 -->
  		<li class="heightLimit types" style="display:none;">
				<div class="form-group">
					<label for="virtualType" class="control-label form-label">虚拟商品类型：</label>
					<div class="input-checkbox-box" style="height:34px;">
						<input type="radio" name="virtualType" id="virtualType1" value="0" disabled="disabled"><label for="">红包</label>
						<input type="radio" name="virtualType" id="virtualType2" value="1" checked disabled="disabled"><label for="">加息券</label>
					</div>
				</div>
			</li>
  		
  		<!-- 红包模块 -->
  		<li class="heightLimit redPacket" style="display:none;">
			<div class="form-group">
		      <label for="ruleId" class="control-label form-label">红包名称：</label>
		      <div class="input-box">
		      		<select name="ruleId" id="goodsRedId" class="form-control required" data-msg-required="请选择"  disabled="disabled">
		      		<option value="">请选择</option>
		      			<#if redenvelopes??>
		      				<#list redenvelopes as item>
		      				<option value="${item.uuid}">${item.ruleName!''}</option>
		      				</#list>
		      			</#if>
		      		</select>
		      </div>
		    </div>
  		</li>
  		
  		
  		<!-- 加息券模块 -->
  		<li class="heightLimit rateCoupon" style="display:none;">
			<div class="form-group">
		      <label for="ruleId" class="control-label form-label">加息券名称：</label>
		      <div class="input-box">
		      		<select name="ruleId" id="goodsCouponId" class="form-control required" data-msg-required="请选择"  disabled="disabled">
		      		<option value="">请选择</option>
		      			<#if rateCoupon??>
		      				<#list rateCoupon as item>
		      				<option value="${item.uuid}">${item.ruleName!''}</option>
		      				</#list>
		      			</#if>
		      		</select>
		      </div>
		    </div>
  		</li>
  		
  		<li class="full-width">
  			<div class="form-group">
		      <label for="name" class="control-label form-label" style="width:13%;">图片：</label>
		       <div class="">
					<div id="uploadArticle" class="uploadWrap" data-arr="picPath">
						  <ul id="articlePagePic" class="photoUpload" style="overflow:hidden">
					        	<li class="addFileBtn" style="left:0;">
					            	<input type="file" name="picNames"  accept="image/gif, image/jpeg,image/png" class="uploadFileInput" id="articlePicPath" onchange="return ajaxFileUpload4('articlePicPath','/imageUp.jsp?editorid=goods','picPaths');" title="点击上传图片" />
					            </li>
					            <div class="imgdom"></div>
					      </ul>
					</div>
				</div>
		    </div>
		</li>
  		<li class="full-width">
			<div class="form-group" style="clear:both;">
		      <label for="content" class="control-label form-label" style="width:13%;float:left;">商品详情：</label>
		      <div class="input-box" style="width:87%;float:left;">
		      <textarea type="text" class="form-control" name="content"  id="content"  style="width:100%;border:1px solid #e5e6e7;padding:10px;"></textarea>
		      </div>
		    </div>
  		</li>
  		<li class="full-width">
			<div class="form-group" style="clear:both;">
		      <label for="notes" class="control-label form-label" style="width:13%;float:left;">文字备注：</label>
		      <div class="input-box" style="width:87%;float:left;">
		      <textarea type="text" class="form-control" name="notes"  id="notes"  style="width:100%;border:1px solid #e5e6e7;padding:10px;"></textarea>
		      </div>
		    </div>
  		</li>
		<div class="form-group" style="clear:both;">
				<label for="loginName" class="control-label form-label" style="width:13%;float:left;">配送信息：</label>
				<div class="input-box" style="width:87%;float:left;">
					<textarea name="remark" id="remark" rows="4"  class="text" maxlength="256" style="width:100%;border:1px solid #e5e6e7;padding:10px;">免运费</textarea>
				</div>
			</div>
		</li>
  		</ul>
  		<input type="hidden" name="status" id="status" value=0>
</form>
 </div>
<script src="${theme_dir}/static/js/plugins/jquery.suggest.js"></script>
<script src="${theme_dir}/static/js/ajaxfileupload.js"></script>
<script src="${theme_dir}/static/js/upload.js"></script>
<script type="text/javascript">
$("#form").validate({
	submitHandler: function(form) {	
		$(form).ajaxSubmit({
			type: "post",
			dataType: "json",
			success: function(data) {
				if (data.result) {
					layer.alert(data.msg, {
						zIndex:100000,
						icon: 6,
						cancel: function(index){
								layer.closeAll();
								gridobj.trigger("reloadGrid"); //重新载入 
	  						}
					}, function() {						
						layer.closeAll();
						gridobj.trigger("reloadGrid"); //重新载入  
					});
				} else {
					layer.alert(data.msg, {
						zIndex:100000,
						icon: 5
					});
				}
			}
		});
	}
});

$("input[name='isVirtual']").click(function(){
	 switch($("input[name=isVirtual]:checked").attr("id")){
		  case "isVirtual1":
			   $(".types").css("display","block");
			   $(".redPacket").css("display","none");
			   $("input[name='virtualType']").removeAttr('disabled');
			   //$("select[name='ruleId']").removeAttr('disabled');
			   if($("input[name='virtualType']:checked").attr("id") == 'virtualType2'){
					$("#goodsRedId").attr('disabled','true');
					$("#goodsCouponId").removeAttr('disabled');
				}else{
					$("#goodsRedId").removeAttr('disabled');
					$("#goodsCouponId").attr('disabled','true');
				}
			   $(".rateCoupon").css("display","block");
			   $(".xn").hide();
			   $(".xn").find("input").attr('disabled','true');
			   $("#remark").html("本商品为电子优惠券，兑换成功后会发送至您的账户");
			   break;
		  case "isVirtual2":
				$(".types").css("display","none");
				$(".redPacket").css("display","none");
				$(".rateCoupon").css("display","none");
				$("input[name='virtualType']").attr('disabled','true');
				$("select[name='ruleId']").attr('disabled','true')
			   	$(".xn").show();
			   	$(".xn").find("input").removeAttr('disabled');
			   	$("#remark").html("免运费");
			   break;       
	       default:
		      break;
		 }
 });
$("input[name='virtualType']").click(function(){
	 switch($("input[name=virtualType]:checked").attr("id")){
		  case "virtualType1":
			    $(".redPacket").css("display","block");
				$(".rateCoupon").css("display","none");
				$("#goodsRedId").removeAttr('disabled');
				$("#goodsCouponId").attr('disabled','true');
			   break;
		  case "virtualType2":
			  	
				$(".redPacket").css("display","none");
				$(".rateCoupon").css("display","block");
				$("#goodsRedId").attr('disabled','true');
				$("#goodsCouponId").removeAttr('disabled');
			   break;       
	       default:
		      break;
		 }
 });
</script>
